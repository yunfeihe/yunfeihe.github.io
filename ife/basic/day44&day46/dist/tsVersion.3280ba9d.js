parcelRequire=function(e,r,n){var t="function"==typeof parcelRequire&&parcelRequire,i="function"==typeof require&&require;function u(n,o){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!o&&f)return f(n,!0);if(t)return t(n,!0);if(i&&"string"==typeof n)return i(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}a.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,a,l,l.exports)}return r[n].exports;function a(e){return u(a.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=t;for(var o=0;o<n.length;o++)u(n[o]);return u}({4:[function(require,module,exports) {
var t=function(){function t(t,n){this.name=t,this.payment=n}return t.getInstance=function(n,e){return t.instance||(t.instance=new t(n,e)),t.instance},t.prototype.startCook=function(t,n){console.log(this.name+"已经开始做"+t.name+"了"),console.log("------waiting------"),console.log("菜已经做好了，通知"+n.name+"去上菜"),this.order=t,this.notifyWaiterToServe(n)},t.prototype.notifyWaiterToServe=function(t){t.startToServeDishes(this.order)},t.instance=null,t}(),n=function(){function t(t,n){this.name=t,this.payment=n}return t.getInstance=function(n,e){return t.instance||(t.instance=new t(n,e)),t.instance},t.prototype.takeOrderBy=function(t,n){this.orderBy=n,this.order=t},t.prototype.notifyCookToCook=function(t){t.startCook(this.order,this)},t.prototype.startToServeDishes=function(t){console.log("给"+this.orderBy.name+"上"+t.name),this.orderBy.notifyOk()},t}(),e=function(){function t(t){this.__customer=t}return t.getInstance=function(n){return void 0===n&&(n=null),t.instance||(t.instance=new t(n)),t.instance},t.prototype.getCustomer=function(){return this.__customer},t.prototype.setCustomer=function(t){null!==this.__customer&&null!==t?console.log("已经有人了"):this.__customer=t},t}(),o=function(){function t(t){this.seat=null,this.name=t}return t.prototype.takeSeat=function(t){this.seat=t,t.setCustomer(this)},t.prototype.toString=function(){return this.name},t.prototype.outSeat=function(){null===this.seat?console.log("你还没有入座"):this.seat.setCustomer(null)},t.prototype.orderToWaiter=function(t,n){t.takeOrderBy(n,this)},t.prototype.notifyOk=function(){console.log(this.name+"正在吃饭"),console.log("吃完了"),this.outSeat()},t.instance=null,t}(),r=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.order=function(n){return n in t.dishes?{name:n,price:t.dishes[n]}:(console.log("没有叫"+n+"的菜，可以帮你做，但定价一律200"),{name:n,price:200})},t.dishes={fish:100,meat:100,drink:10,duck:100},t}(),i=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.stor=[].concat(t)}return t.prototype.add=function(t){this.stor.push(t)},t.prototype.offer=function(){return this.stor.shift()},t.prototype.isEmpty=function(){return 0===this.stor.length},t.prototype.toString=function(){return"["+this.stor.join("-")+"]"},t}();function s(){var s=t.getInstance("海绵宝宝",0),c=n.getInstance("章鱼哥",1e3),u=new o("派大星"),a=new i,l="fish";console.log(s,c,u,a),a.add(u),window.setInterval(function(){if(console.log("新的一轮"),console.log("当前剩余顾客",a.toString()),a.isEmpty())console.log("当前没有顾客");else{var t=a.offer();console.log("服务顾客：",t.name),t.takeSeat(e.getInstance());var n=r.getInstance().order(l);t.orderToWaiter(c,n),c.notifyCookToCook(s)}},2e3);var f=document.querySelector("#name"),h=document.querySelector("#dish");document.querySelector("#order").addEventListener("click",function(){var t=f.value,n=(h.value,new o(t));l=h.value,a.add(n),console.log(n.name+"来了")})}s();
},{}]},{},[4])
//# sourceMappingURL=/tsVersion.3280ba9d.map